# 🔑 환경변수 설정 가이드 (매우 중요!)

## 🚨 문제 발견!

**`.env.local` 파일에 `SUPABASE_SERVICE_KEY`가 없어서 Admin 기능이 작동하지 않습니다!**

---

## ✅ 해결 방법 (5분)

### Step 1: Supabase에서 Service Role Key 복사

#### 1-1. Supabase Dashboard 접속
```
https://supabase.com/dashboard
→ 프로젝트 선택
```

#### 1-2. Settings → API 메뉴
```
좌측 메뉴:
⚙️ Settings (설정) → API
```

#### 1-3. Service Role Key 복사
```
페이지에서 찾기:
"Project API keys" 섹션

2개 키가 있습니다:
┌────────────────────────────────────┐
│ anon public                        │
│ eyJhb... (짧은 키)                 │  ← 이건 아님!
├────────────────────────────────────┤
│ service_role                       │  ← 이것!
│ eyJhb... (긴 키)                   │
│ [Reveal] 버튼                      │  ← 클릭!
└────────────────────────────────────┘

1. [Reveal] 버튼 클릭
2. 나타난 긴 키 전체 복사 (eyJ로 시작하는 매우 긴 문자열)
```

---

### Step 2: .env.local 파일 수정

#### 2-1. Cursor에서 .env.local 파일 열기

**왼쪽 탐색기에서**:
```
파일 목록에서 찾기:
📁 cursor 1 (루트)
  ├── 📁 src
  ├── 📁 public
  ├── 📄 .env.local  ← 이 파일!
  └── ...
```

**클릭해서 열기!**

---

#### 2-2. 파일 확인

현재 내용:
```bash
NEXT_PUBLIC_SUPABASE_URL=https://xxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhb...짧은키...
```

---

#### 2-3. 아래에 추가

파일 **제일 아래**에 **새 줄 추가**:

```bash
# Supabase Service Role Key (Admin 기능용)
SUPABASE_SERVICE_KEY=여기에_방금_복사한_긴_키_붙여넣기
```

**⚠️ 중요**: 
- `여기에_방금_복사한_긴_키_붙여넣기` 부분을 **삭제**하고
- Supabase에서 복사한 **긴 키**를 붙여넣으세요!

**예시**:
```bash
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvdXItcHJvamVjdC1pZCIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJpYXQiOjE2Nzg4NTkyMDAsImV4cCI6MTk5NDQzNTIwMH0.example_signature_here
```
(이건 예시입니다! 본인의 실제 키를 사용하세요)

---

#### 2-4. 저장

**Ctrl + S** (저장)

---

### Step 3: 개발 서버 재시작 (필수!)

환경 변수를 추가했으면 **반드시 서버 재시작**해야 합니다!

#### 3-1. 터미널에서 서버 중지
```
터미널 클릭 → Ctrl + C
```

**확인**:
```
Terminated  ← 이렇게 나오면 중지됨
PS C:\Users\MY\Desktop\cursor 1>  ← 커서 깜빡임
```

#### 3-2. 서버 재시작
```
터미널에 입력:
npm run dev

엔터!
```

**기다리기**:
```
✓ Ready in 4.5s  ← 이렇게 나올 때까지 기다리기
- Local: http://localhost:3000
```

---

### Step 4: Admin 페이지 테스트

#### 4-1. 브라우저 새로고침
```
Ctrl + Shift + R
```

#### 4-2. Admin 페이지 접속
```
주소창:
http://localhost:3000/admin/cases

엔터!
```

#### 4-3. 화면 확인

**이제 빨간색 화면이 나와야 합니다!** ✅

---

## 📋 전체 체크리스트

순서대로 확인:

- [ ] 1. Supabase에서 Service Role Key 복사했나요?
- [ ] 2. .env.local 파일 열었나요?
- [ ] 3. `SUPABASE_SERVICE_KEY=긴키` 추가했나요?
- [ ] 4. Ctrl + S로 저장했나요?
- [ ] 5. 터미널에서 Ctrl + C로 서버 중지했나요?
- [ ] 6. `npm run dev`로 서버 재시작했나요?
- [ ] 7. `✓ Ready` 메시지 나왔나요?
- [ ] 8. 브라우저에서 Ctrl + Shift + R 했나요?
- [ ] 9. `/admin/cases` 접속했나요?
- [ ] 10. 빨간색 화면 나왔나요?

---

## 🆘 도움말

**막히는 단계를 알려주세요:**

1. "Service Role Key를 어디서 찾나요?" 
2. ".env.local 파일이 안 보여요"
3. "서버 재시작이 안 돼요"
4. "Service Role Key 추가했는데도 안 돼요"

어느 단계인지 알려주시면 더 자세히 도와드리겠습니다! 😊
