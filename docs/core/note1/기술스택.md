기술 스택 최종본

---

## 1. 핵심 선택

- **플랫폼**: 웹 (모바일웹 중심)
- **메인 스택**: **Next.js + Supabase**

---

## 2. 프론트엔드

- **Framework**: Next.js (App Router)
- **Library**: React
- **Language**: TypeScript
- **스타일링**: Tailwind CSS
- **상태/데이터 처리**
  - Next.js **Server Actions** 중심
  - 필요 시 React Query 보조

---

## 3. 서버 로직

- 별도 백엔드 서버 없음
- **Next.js Server Actions + Route Handlers** 사용
- 도메인별 서버 로직:
  - `/modules/case/actions.ts`
  - `/modules/careLog/actions.ts`
  - `/modules/pdf/actions.ts`
  - 등

---

## 4. 데이터베이스 & 인증 (Supabase)

- **DB**: PostgreSQL (Supabase)
- **Auth**: Supabase Auth
  - 1차: 보호자만 로그인
  - 간병인: 토큰 링크 기반 접근
- **Storage**: (2차 이후) PDF 파일 저장용 버킷

주요 테이블만 사용:
- `users`  – 보호자(향후 간병인/관리자 확장)
- `cases`  – 간병 케이스 + 간병인 기본 정보
- `care_logs` – 일자별 간병일지
- `payments` – 간병비 지급 정보
- `case_tokens` – 간병인 링크용 토큰

---

## 5. PDF 생성

- **라이브러리**: `@react-pdf/renderer`
  - React 컴포넌트 형태로 계약서/일지/확인서 템플릿 구성
- (옵션) `pdf-lib`로 추가 가공 가능
- `modules/pdf/actions.ts`에서 생성

---

## 6. 배포 & 운영

- **Next.js**: Vercel
- **DB/Auth/Storage**: Supabase
- **환경 분리**
  - dev / prod 두 개
  - Vercel & Supabase 프로젝트 각각 dev/prod 분리
- (추가 예정) 에러 모니터링: Sentry

---

## 7. 폴더 구조 (요약)

```text
/src
  /app                # 라우팅 레이어
  /modules            # 도메인별 로직
    /shared
      /components     # 공통 UI
      /lib            # supabase client, 유틸
      /types          # DB 타입, 공통 타입
    /auth
    /case
    /careLog
    /pdf
    /notification     # 2차에서 사용
